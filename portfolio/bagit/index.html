<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Bag It! - Clark Kromenaker</title>
<meta name=description content="_Engineer<br />Unity<br />iOS, Android_"><meta name=author content="Clark Kromenaker"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Clark Kromenaker","url":"https:\/\/clarkkromenaker.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/clarkkromenaker.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/clarkkromenaker.com\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/clarkkromenaker.com\/portfolio\/bagit\/","name":"Bag it!"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Clark Kromenaker"},"headline":"Bag It!","description":"_Engineer\nUnity\niOS, Android_","inLanguage":"en","wordCount":1015,"datePublished":"2011-12-01T00:00:00","dateModified":"2011-12-01T00:00:00","image":"https:\/\/clarkkromenaker.com\/img\/avatar-icon.png","keywords":[""],"mainEntityOfPage":"https:\/\/clarkkromenaker.com\/portfolio\/bagit\/","publisher":{"@type":"Organization","name":"https:\/\/clarkkromenaker.com\/","logo":{"@type":"ImageObject","url":"https:\/\/clarkkromenaker.com\/img\/avatar-icon.png","height":60,"width":60}}}</script><meta property="og:title" content="Bag It!"><meta property="og:description" content="_Engineer<br />Unity<br />iOS, Android_"><meta property="og:image" content="https://clarkkromenaker.com/img/portfolio/bagit_icon.png"><meta property="og:url" content="https://clarkkromenaker.com/portfolio/bagit/"><meta property="og:type" content="website"><meta property="og:site_name" content="Clark Kromenaker"><meta name=twitter:title content="Bag It!"><meta name=twitter:description content="_Engineer<br />Unity<br />iOS, Android_"><meta name=twitter:image content="https://clarkkromenaker.com/img/portfolio/bagit_icon.png"><meta name=twitter:card content="summary_large_image"><link href=https://clarkkromenaker.com/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.133.1"><link rel=alternate href=https://clarkkromenaker.com/index.xml type=application/rss+xml title="Clark Kromenaker"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://clarkkromenaker.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://clarkkromenaker.com/css/syntax.css><link rel=stylesheet href=https://clarkkromenaker.com/css/codeblock.css><link rel=stylesheet href=https://clarkkromenaker.com//css/portfolio.css><link rel=stylesheet href=https://clarkkromenaker.com//css/misc.css><link rel=stylesheet href=https://clarkkromenaker.com//css/overrides.css><script src=https://clarkkromenaker.com//js/darkModeToggle.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://clarkkromenaker.com/>Clark Kromenaker</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li><a title=Portfolio href=/portfolio>Portfolio</a></li><li><a title=About href=/about>About</a></li><li><a title=Tags href=/tags>Tags</a></li><li class=navlinks-container id=dark-mode-toggle><a href=javascript:toggleColorScheme();><i id=icon-sun class="fas fa-sun"></i>
<i id=icon-moon class="fas fa-moon"></i></a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Clark Kromenaker" href=https://clarkkromenaker.com/><img class=avatar-img src=https://clarkkromenaker.com/img/avatar-icon.png alt="Clark Kromenaker"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=portfolio-heading><h1>Bag It!</h1></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p><a href=http://www.hiddenvariable.com/bagit target=_blank>Bag It!</a> is a light and fun mobile game that puts your grocery bagging skills to the test!</p><p><img src=/img/portfolio/bagit_promo.png#center alt="Bag It Promo Art"></p><p>It may seem easy to bag your groceries, but there&rsquo;s more to it than meets the eye. Avoid crushing fragile items, group related groceries for bonus points, complete challenges, and manage the personalities of an array of temperamental groceries. Become the ultimate grocery bagger through six modes of play and 100+ levels!</p><p><em>Bag It!</em> is available on the Apple App Store, Google Play.</p><h1 id=development>Development</h1><p><em>Bag It!</em> was the first commercial game I contributed to, so it holds a special place in my heart. Though I was originally hired at Hidden Variable as an intern, I acted as the <em>de facto</em> lead programmer on this project, handling code architecture and programming for the majority of the game. By the time we hired a second programmer, we were about to ship!</p><p>The game was built in Unity, and development took place from about February to November of 2011. We then continued to support the game with updates through 2012. I worked with one designer and one artist to implement the game from start to finish.</p><p>I coded many systems for this game: gameplay logic, touch input, progression and level unlock logic, audio playback, UI elements, menu flow, and an achievement system, to name a few. Below, I&rsquo;ll highlight a few particularly interesting systems I worked on.</p><h2 id=navigating-the-grocery-bag>Navigating the Grocery Bag</h2><p><img src=/img/portfolio/bagit_gameplay.png#floatright alt="Gameplay Screenshot">
As you play <em>Bag It!</em>, your goal is to maneuver a variety of groceries in a tight space without breaking anything. It was very important to get the input and placement of groceries correct, or else the game was liable to be more frustrating than fun.</p><p>Since this is a mobile game, touch inputs are used. When you drag a grocery, it&rsquo;s &ldquo;picked up&rdquo; and should follow your finger until you drop it. It was quite tricky to get the dragged grocery to behave as the player expected when dragging their finger. With all the various grocery sizes and orientations, it was easy for the dragged grocery to get stuck or end up in an unexpected location.</p><p>After trying several iterations, the solution I found was this:</p><ol><li><p>Treat the grocery bag as a grid of squares. Based on a grocery&rsquo;s position and orientation, it always takes up a set number of squares.</p></li><li><p>Every frame, re-evaluate what squares were occupied and by who.</p></li><li><p>When dragging a grocery, iterate the grid and find the nearest location to the touch that had enough space to hold the current grocery. If there&rsquo;s a clear path to this spot, smoothly move over a couple frames. If the path is blocked, teleport instantaneously.</p></li></ol><p>This approach worked well in playtesting, and players felt that they could execute their moves with a lot of precision.</p><h2 id=grocery-weight>Grocery Weight</h2><p>One of the main challenges in the game is to move groceries into the bag without breaking anything. Consider the classic real-world example: you put your eggs in the bottom of the bag, and heavier things crush them (poor things).</p><p>In <em>Bag It!</em>, each grocery has a weight as well as a weight limit. You want to avoid putting too many objects on top of fragile items like eggs, bread, or cereal!</p><p>The grid structure described above helped with the weight system. If a grocery comes to rest, and there are one or more groceries beneath it, its weight is evenly distributed between all groceries below. This is even recursive, with the item on the bottom of the bag absorbing the weight of all items above.</p><h2 id=grocery-groups>Grocery Groups</h2><p>To spice up gameplay, we decided to add the idea that grouping related groceries would give you a score bonus. For example, putting milk, cereal, eggs, and OJ near one another would give a &ldquo;balanced breakfast&rdquo; score bump.</p><p>The systems and data structures used for grocery navigation and grocery weight actually came in handy here. Because we had a grid of occupied cells in the bag, I was able to generate a graph from the groceries in the bag at any one time. From there, a breadth first search could be done, starting at any grocery, to see if a grocery group was detected.</p><h2 id=build-system>Build System</h2><p>Beyond programming the game itself, building and distributing the game for playtests was another challenge. I was responsible for getting Hidden Variable&rsquo;s build and deployment infrastructure up and running in an early state.</p><p>I developed a Unity build system that allowed us to build 10+ separate SKUs across iOS, Android, Windows, and macOS from a single codebase.</p><p>Each SKU was configurable with a wide variety of options. The most basic one was build platform, but arbitrary ones could be added. For example, we experimented with many mobile game economy paradigms at this time (premium, iPad-only &ldquo;HD&rdquo; SKUs, free trial versions, full &ldquo;free-to-play&rdquo; versions, China-specific versions, etc), and the build system allowed us to support all of them.</p><p>This was also my first foray into CD/CI. We used Jenkins to create builds, and a combination of Google Drive and HockeyApp to distribute builds. This allowed builds to be created automatically without my intervention, which allowed me to focus on other things.</p><h2 id=plugins-and-sdks>Plugins and SDKs</h2><p>This game was also my first taste of integrating A LOT of different SDKs as Unity plugins. By the end of this project, I was pretty adept at it. A few we used across many SKUs:</p><ul><li>GameCenter Achievements and Leaderboards</li><li>Facebook Login and Leaderboards</li><li>Apple and Google In-App Purchases</li><li>Flurry Analytics and Game Analytics</li><li>Chartboost</li></ul><h2 id=conclusion>Conclusion</h2><p><em>Bag It!</em> was a critical and commercial success, which helped Hidden Variable keep the lights on in the early days and provided me with a lot of positive reinforcement and motivation.</p><p>It was a great first game to work on. The work required matched my entry skill level nicely. The game was excellent initial exposure (and &ldquo;trial by fire&rdquo;) in commercial game development.</p><p>Not only did I gain a ton of experience in gameplay programming and Unity development, I also learned a lot about build systems, integrating SDKs as Unity plugins, and various mobile game business models.</p></article><ul class="pager blog-pager"></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:kromenak@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/kromenak title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/clarkkromenaker title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Clark Kromenaker
&nbsp;&bull;&nbsp;&copy;
2025</p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Powered by Hugo v0.133.1</a> &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://clarkkromenaker.com/js/main.js></script><script>renderMathInElement(document.body)</script></body></html>